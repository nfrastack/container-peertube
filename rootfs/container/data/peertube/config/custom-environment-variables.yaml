# SPDX-FileCopyrightText: Â© 2025 Nfrastack <code@nfrastack.com>
#
# SPDX-License-Identifier: MIT

listen:
  hostname: "LISTEN_HOSTNAME"
  port: "LISTEN_PORT"

webserver:
  hostname: "WEBSERVER_HOSTNAME"
  port:
    __name: "WEBSERVER_PORT"
    __format: "json"
  https:
    __name: "WEBSERVER_HTTPS"
    __format: "json"

secrets:
  peertube: "PEERTUBE_SECRET"

rates_limit:
  api:
    window: RATELIMIT_API_WINDOW
    max: RATELIMIT_API_MAX
  login:
    window: RATELIMIT_LOGIN_WINDOW
    max: RATELIMIT_LOGIN_MAX
  signup:
    window: RATELIMIT_SIGNUP_WINDOW
    max: RATELIMIT_SIGNUP_MAX
  ask_send_email:
    window: RATELIMIT_ASK_SEND_EMAIL_WINDOW
    max: RATELIMIT_ASK_SEND_EMAIL_MAX
  receive_client_log:
    window: RATELIMIT_RECEIVE_CLIENT_LOG_WINDOW
    max: RATELIMIT_RECEIVE_CLIENT_LOG_MAX
  plugins:
    window: RATELIMIT_PLUGINS_WINDOW
    max: RATELIMIT_PLUGINS_MAX
  well_known:
    window: RATELIMIT_WELLKNOWN_WINDOW
    max: RATELIMIT_WELLKNOWN_MAX
  feeds:
    window: RATELIMIT_FEEDS_WINDOW
    max: RATELIMIT_FEEDS_MAX
  activity_pub:
    window: RATELIMIT_ACTIVITYPUB_WINDOW
    max: RATELIMIT_ACTIVITYPUB_MAX
  client:
    window: RATELIMIT_CLIENT_WINDOW
    max: RATELIMIT_CLIENT_MAX
  download_generate_video:
    window: RATELIMIT_DOWNLOAD_GENERATE_VIDEO_WINDOW
    max: RATELIMIT_DOWNLOAD_GENERATE_VIDEO_MAX

trust_proxy:
  __name: "TRUST_PROXY"
  __format: "json"

database:
  hostname: "DB_HOST"
  port: "DB_PORT"
  name: "DB_NAME"
  suffix: "DB_SUFFIX"
  username: "DB_USER"
  password: "DB_PASS"
  ssl:
    __name: "DB_SSL"
    __format: "json"

redis:
  hostname: "REDIS_HOST"
  port: "REDIS_PORT"
  auth: "REDIS_AUTH"

smtp:
  hostname: "SMTP_HOST"
  port: "SMTP_PORT"
  username: "SMTP_USER"
  password: "SMTP_PASS"
  tls:
    __name: "SMTP_TLS"
    __format: "json"
  disable_starttls:
    __name: "SMTP_DISABLE_STARTTLS"
    __format: "json"
  from_address: "SMTP_FROM"

email:
  body:
    signature: "EMAIL_BODY_SIGNATURE"
  subject:
    prefix: "EMAIL_SUBJECT_PREFIX"

defaults:
  publish:
    download_enabled:
        __name: "DEFAULT_PUBLISH_ENABLE_DOWNLOAD"
        __format: "json"
    comments_policy: "DEFAULT_PUBLISH_COMMENTS_POLICY"
    privacy: "DEFAULT_PUBLIC_PRIVACY"
    license: "DEFAULT_PUBLIC_LICENSE"

  p2p:
    webapp:
      enabled:
        __name: "DEFAULT_P2P_ENABLE_WEBAPP"
        __format: "json"
    embed:
      enabled:
        __name: "DEFAULT_P2P_ENABLE_EMBED"
        __format: "json"

storage:
  tmp: "STORAGE_TMP_PATH"
  tmp_persistent: "STORAGE_TMP_PERSISTENT_PATH"
  bin: "STORAGE_BIN_PATH"
  avatars: "STORAGE_AVATAR_PATH"
  web_videos: "STORAGE_WEB_VIDEOS_PATH"
  streaming_playlists: "STORAGE_STREAMING_PLAYLISTS_PATH"
  original_video_files: "STORAGE_ORIGINAL_VIDEO_PATH"
  redundancy: "STORAGE_REDUNDANCY_PATH"
  logs: "LOG_PATH"
  previews: "STORAGE_PREVIEWS_PATH"
  thumbnails: "STORAGE_THUMBNAILS_PATH"
  storyboards: "STORAGE_STORYBOARDS_PATH"
  torrents: "STORAGE_TORRENTS_PATH"
  captions: "STORAGE_CAPTIONS_PATH"
  cache: "STORAGE_CACHE_PATH"
  plugins: "STORAGE_PLUGINS_PATH"
  well_known: "STORAGE_WELLKNOWN_PATH"
  client_overrides: "STORAGE_CLIENT_OVERRIDES_PATH"

static_files:
  private_files_require_auth:
    __name: "REQUIRE_AUTH_PRIVATE_FILES"
    __format: "json"

object_storage:
  enabled:
    __name: "ENABLE_OBJECT_STORAGE"
    __format: "json"

  endpoint: "OBJECT_STORAGE_ENDPOINT"

  region: "OBJECT_STORAGE_REGION"

  upload_acl:
    public: "OBJECT_STORAGE_UPLOADACL_PUBLIC"
    private: "OBJECT_STORAGE_UPLOADACL_PRIVATE"

  proxy:
    proxify_private_files: OBJECT_STORAGE_PROXY_PRIVATE_FILES

  credentials:
    access_key_id: "OBJECT_STORAGE_CREDENTIALS_ACCESS_KEY_ID"
    secret_access_key: "OBJECT_STORAGE_CREDENTIALS_SECRET_ACCESS_KEY"

  max_upload_part: OBJECT_STORAGE_MAX_UPLOAD_PART

  max_request_attempts: "OBJECT_STORAGE_MAX_REQUEST_ATTEMPTS"

  streaming_playlists:
    bucket_name: "OBJECT_STORAGE_STREAMING_PLAYLISTS_BUCKET_NAME"
    prefix: "OBJECT_STORAGE_STREAMING_PLAYLISTS_PREFIX"
    base_url: "OBJECT_STORAGE_STREAMING_PLAYLISTS_BASE_URL"
    store_live_streams: OBJECT_STORAGE_STREAMING_PLAYLISTS_STORE_LIVE_STREAMS

  web_videos:
    bucket_name: "OBJECT_STORAGE_WEB_VIDEOS_BUCKET_NAME"
    prefix: "OBJECT_STORAGE_WEB_VIDEOS_PREFIX"
    base_url: "OBJECT_STORAGE_WEB_VIDEOS_BASE_URL"

  user_exports:
    bucket_name: "OBJECT_STORAGE_USER_EXPORTS_BUCKET_NAME"
    prefix: "OBJECT_STORAGE_USER_EXPORTS_PREFIX"
    base_url: "OBJECT_STORAGE_USER_EXPORTS_BASE_URL"

  original_video_files:
    bucket_name: "OBJECT_STORAGE_ORIGINAL_VIDEO_BUCKET_NAME"
    prefix: "OBJECT_STORAGE_ORIGINAL_VIDEO_PREFIX"
    base_url: "OBJECT_STORAGE_ORIGINAL_VIDEO_BASE_URL"

log:
  level: "LOG_LEVEL"
  rotation:
    enabled:
      __name: "FALSE"
      __format: "json"
  anonymize_ip:
    __name: "LOG_ANONYMIZE_IP"
    __format: "json"
  log_ping_requests:
    __name: "LOG_PING_REQUESTS"
    __format: "json"
  log_tracker_unknown_infohash:
    __name: "LOG_TRACKER_UNKNOWN_INFOHASH"
    __format: "json"
  log_http_requests:
    __name: "LOG_HTTP_REQUESTS"
    __format: "json"
  prettify_sql:
    __name: "LOG_PRETTIFY_SQL"
    __format: "json"
  accept_client_log:
    __name: "LOG_ACCEPT_CLIENT_LOGS"
    __format: "json"

open_telemetry:
  metrics:
    enabled:
      __name: "OPENTELEMETRY_METRICS_ENABLED"
      __format: "json"

    playback_stats_interval: "OPENTELEMETRY_METRICS_PLAYBACK_STATS_INTERVAL"

    http_request_duration:
      enabled:
        __name: "OPENTELEMETRY_METRICS_HTTP_REQUEST_DURATION_ENABLED"
        __format: "json"

    prometheus_exporter:
      hostname: "OPENTELEMETRY_METRICS_PROMETHEUS_EXPORTER_HOST"
      port: "OPENTELEMETRY_METRICS_PROMETHEUS_EXPORTER_PORT"

  tracing:
    enabled:
      __name: "OPENTELEMETRY_TRACING_ENABLED"
      __format: "json"

    jaeger_exporter:
      endpoint: "OPENTELEMETRY_TRACING_JAEGER_EXPORTER_ENDPOINT"

csp:
  enabled:
    __name: "ENABLE_CSP"
    __format: "json"

  report_only:
    __name: "CSP_REPORT_ONLY"
    __format: "json"

security:
  frameguard:
    enabled:
      __name: "SECURITY_ENABLE_FRAMEGUARD"
      __format: "json"
  powered_by_header:
    enabled:
      __name: "SECURITY_ENABLE_POWERED_BY_HEADER"
      __format: "json"

tracker:
  enabled:
    __name: "ENABLE_TRACKER"
    __format: "json"
  private:
    __name: "TRACKER_PRIVATE"
    __format: "json"
  reject_too_many_announces:
    __name: "TRACKER_REJECT_TOO_MANY_ANNOUNCES"
    __format: "json"

federation:
  enabled:
    __name: "ENABLE_FEDERATION"
    __format: "json"

  prevent_ssrf:
    __name: "FEDERATION_PREVENT_SSRF"
    __format: "json"

  sign_federated_fetches:
    __name: "FEDERATION_SIGN_FETCHES"
    __format: "json"

  videos:
    federate_unlisted:
      __name: "FEDERATION_VIDEOS_UNLISTED"
      __format: "json"

    cleanup_remote_interactions:
      __name: "FEDERATION_VIDEOS_CLEANUP_REMOTE_INTERACTIONS"
      __format: "json"

peertube:
  check_latest_version:
    enabled:
      __name: "ENABLE_CHECK_LATEST_VERSION"
      __format: "json"
    url: "CHECK_LATEST_VERSION_URL"

webadmin:
  configuration:
    edition:
      allowed:
        __name: "STATS_ENABLE_REGISTRATION_REQUESTS"
        __format: "json"
stats:
  registration_requests:
    enabled:
      __name: "STATS_ENABLE_REGISTRATION_REQUESTS"
      __format: "json"

  abuses:
    enabled:
      __name: "STATS_ENABLE_REGISTRATION_ABUSES"
      __format: "json"

  total_moderators:
    enabled:
      __name: "STATS_ENABLE_TOTAL_MODERATORS"
      __format: "json"

  total_admins:
    enabled:
      __name: "STATS_ENABLE_TOTAL_ADMINS"
      __format: "json"

user:
  video_quota: "PEERTUBE_USER_VIDEO_QUOTA"

admin:
  email: "PEERTUBE_ADMIN_EMAIL"

contact_form:
  enabled: "PEERTUBE_CONTACT_FORM_ENABLED"

signup:
  enabled: "PEERTUBE_SIGNUP_ENABLED"
  limit: "PEERTUBE_SIGNUP_LIMIT"

search:
  remote_uri:
    users: "PEERTUBE_SEARCH_REMOTEURI_USERS"
    anonymous: "PEERTUBE_SEARCH_REMOTEURI_ANONYMOUS"

import:
  videos:
    http:
      enabled: "PEERTUBE_IMPORT_VIDEOS_HTTP"
    torrent:
      enabled: "PEERTUBE_IMPORT_VIDEOS_TORRENT"

transcoding:
  enabled: "PEERTUBE_TRANSCODING_ENABLED"
  threads: "PEERTUBE_TRANSCODING_THREADS"
  resolutions:
    144p: "PEERTUBE_TRANSCODING_144P"
    240p: "PEERTUBE_TRANSCODING_240P"
    360p: "PEERTUBE_TRANSCODING_360P"
    480p: "PEERTUBE_TRANSCODING_480P"
    720p: "PEERTUBE_TRANSCODING_720P"
    1080p: "PEERTUBE_TRANSCODING_1080P"
    1440p: "PEERTUBE_TRANSCODING_1440P"
    2160p: "PEERTUBE_TRANSCODING_2160P"
  web_videos:
    enabled: "PEERTUBE_TRANSCODING_WEB_VIDEOS_ENABLED"
  hls:
    enabled: "PEERTUBE_TRANSCODING_HLS_ENABLED"

instance:
  name: "PEERTUBE_INSTANCE_NAME"
  description: "PEERTUBE_INSTANCE_DESCRIPTION"
  terms: "PEERTUBE_INSTANCE_TERMS"
