# SPDX-FileCopyrightText: Â© 2025 Nfrastack <code@nfrastack.com>
#
# SPDX-License-Identifier: MIT

CONFIG_PATH=${CONFIG_PATH:-"/config/"}
CONFIG_FILE=${CONFIG_FILE:-"production.yaml"}
DATA_PATH=${DATA_PATH:-"/data/"}

LISTEN_HOSTNAME=${LISTEN_HOSTNAME:-"0.0.0.0"}
LISTEN_PORT=${LISTEN_PORT:-"9000"}

LOG_PATH=${LOG_PATH:-"/logs/"}
LOG_LEVEL=${LOG_LEVEL:-"info"}

FALSE=false

LOG_ANONYMIZE_IP=${LOG_ANONYMIZE_IP:-"false"}
LOG_PING_REQUESTS=${LOG_PING_REQUESTS:-"true"}
LOG_TRACKER_UNKNOWN_INFOHASH=${LOG_TRACKER_UNKNOWN_INFOHASH:-"true"}

if var_true "${ENABLE_NGINX}"; then
    LOG_HTTP_REQUESTS=${LOG_HTTP_REQUESTS:-"false"}
else
    LOG_HTTP_REQUESTS=${LOG_HTTP_REQUESTS:-"true"}
fi

LOG_PRETTIFY_SQL=${LOG_PRETTIFY_SQL:-"false"}
LOG_ACCEPT_CLIENT_LOGS=${LOG_ACCEPT_CLIENT_LOGS:-"true"}

DB_SUFFIX=${DB_SUFFIX:-""}
DB_PORT=${DB_PORT:-"5432"}
DB_SSL=${DB_SSL:-"false"}
DB_POOL_MAX=${DB_POOL_MAX:-"5"}

REDIS_PORT=${REDIS_PORT:-"6379"}
REDIS_PASS=${REDIS_PASS:-""}
SMTP_HOST=${SMTP_HOST:-"postfix-relay"}
SMTP_PORT=${SMTP_PORT:-"25"}
SMTP_USER=${SMTP_USER:-""}
SMTP_PASS=${SMTP_PASS:-""}
SMTP_TLS=${SMTP_TLS:-"false"}
SMTP_TLS_CA_FILE=${SMTP_TLS_CA_FILE:-""}
SMTP_DISABLE_STARTTLS=${SMTP_DISABLE_STARTTLS:-"false"}
SMTP_FROM=${SMTP_FROM:-"admin@example.com"}

EMAIL_BODY_SIGNATURE=${EMAIL_BODY_SIGNATURE:-"PeerTube"}
EMAIL_SUBJECT_PREFIX=${EMAIL_SUBJECT_PREFIX:-"[PeerTube]"}

DEFAULT_PUBLISH_ENABLE_DOWNLOAD=${DEFAULT_PUBLISH_ENABLE_DOWNLOAD:-"true"}
DEFAULT_PUBLISH_COMMENTS_POLICY=${DEFAULT_PUBLISH_COMMENTS_POLICY:-"1"}
DEFAULT_PUBLISH_PRIVACY=${DEFAULT_PUBLISH_PRIVACY:-"1"}
#DEFAULT_PUBLISH_LICENSE=${DEFAULT_PUBLISH_LICENSE:-""}

DEFAULT_P2P_ENABLE_WEBAPP=${DEFAULT_P2P_ENABLE_WEBAPP:-"true"}
DEFAULT_P2P_ENABLE_EMBED=${DEFAULT_P2P_ENABLE_EMBED:-"true"}

STORAGE_TMP_PATH=${STORAGE_TMP_PATH:-"${DATA_PATH}/tmp/"}
STORAGE_TMP_PERSISTENT_PATH=${STORAGE_TMP_PERSISTENT_PATH:-"${DATA_PATH}/tmp-persistent/"}
STORAGE_BIN_PATH=${STORAGE_BIN_PATH:-"${DATA_PATH}/bin/"}
STORAGE_AVATAR_PATH=${STORAGE_AVATAR_PATH:-"${DATA_PATH}/avatars/"}
STORAGE_WEB_VIDEOS_PATH=${STORAGE_WEB_VIDEOS_PATH:-"${DATA_PATH}/web-videos/"}
STORAGE_STREAMING_PLAYLISTS_PATH=${STORAGE_STREAMING_PLAYLISTS_PATH:-"${DATA_PATH}/streaming-playlists/"}
STORAGE_ORIGINAL_VIDEO_PATH=${STORAGE_ORIGINAL_VIDEO_PATH:-"${DATA_PATH}/original-video/"}
STORAGE_REDUNDANCY_PATH=${STORAGE_REDUNDANCY_PATH:-"${DATA_PATH}/redundancy/"}
STORAGE_PREVIEWS_PATH=${STORAGE_PREVIEWS_PATH:-"${DATA_PATH}/previews/"}
STORAGE_THUMBNAILS_PATH=${STORAGE_THUMBNAILS_PATH:-"${DATA_PATH}/thumbnails/"}
STORAGE_STORYBOARDS_PATH=${STORAGE_STORYBOARDS_PATH:-"${DATA_PATH}/storyboards/"}
STORAGE_TORRENTS_PATH=${STORAGE_TORRENTS_PATH:-"${DATA_PATH}/torrents/"}
STORAGE_CAPTIONS_PATH=${STORAGE_CAPTIONS_PATH:-"${DATA_PATH}/captions/"}
STORAGE_CACHE_PATH=${STORAGE_CACHE_PATH:-"${DATA_PATH}/cache/"}
STORAGE_PLUGINS_PATH=${STORAGE_PLUGINS_PATH:-"${DATA_PATH}/plugins/"}
STORAGE_WELLKNOWN_PATH=${STORAGE_WELLKNOWN_PATH:-"${DATA_PATH}/well-known/"}
STORAGE_CLIENT_OVERRIDES_PATH=${STORAGE_CLIENT_OVERRIDES_PATH:-"${DATA_PATH}/client-overrides/"}

ENABLE_TRACKER=${ENABLE_TRACKER:-"true"}
TRACKER_REJECT_TOO_MANY_ANNOUNCES=${TRACKER_REJECT_TOO_MANY_ANNOUNCES:-"true"}
TRACKER_PRIVATE=${TRACKER_PRIVATE:-"true"}

RATELIMIT_LOGIN_WINDOW=${RATELIMIT_LOGIN_WINDOW:-"5 minutes"}
RATELIMIT_LOGIN_MAX=${RATELIMIT_LOGIN_MAX:-"15"}
RATELIMIT_ASK_SEND_EMAIL_WINDOW=${RATELIMIT_ASK_SEND_EMAIL_WINDOW:-"5 minutes"}
RATELIMIT_ASK_SEND_EMAIL_MAX=${RATELIMIT_ASK_SEND_EMAIL_MAX:-"3"}
RATELIMIT_API_WINDOW=${RATELIMIT_API_WINDOW:-"10 seconds"}
RATELIMIT_API_MAX=${RATELIMIT_API_MAX:-"50"}
RATELIMIT_LOGIN_WINDOW=${RATELIMIT_LOGIN_WINDOW:-"5 minutes"}
RATELIMIT_LOGIN_MAX=${RATELIMIT_LOGIN_MAX:-"15"}
RATELIMIT_SIGNUP_WINDOW=${RATELIMIT_SIGNUP_WINDOW:-"5 minutes"}
RATELIMIT_SIGNUP_MAX=${RATELIMIT_SIGNUP_MAX:-"3"}
RATELIMIT_RECEIVE_CLIENT_LOG_WINDOW=${RATELIMIT_RECEIVE_CLIENT_LOG_WINDOW:-"1 minute"}
RATELIMIT_RECEIVE_CLIENT_LOG_MAX=${RATELIMIT_RECEIVE_CLIENT_LOG_MAX:-"30"}
RATELIMIT_PLUGINS_WINDOW=${RATELIMIT_PLUGINS_WINDOW:-"10 seconds"}
RATELIMIT_PLUGINS_MAX=${RATELIMIT_PLUGINS_MAX:-"200"}
RATELIMIT_WELLKNOWN_WINDOW=${RATELIMIT_WELLKNOWN_WINDOW:-"10 seconds"}
RATELIMIT_WELLKNOWN_MAX=${RATELIMIT_WELLKNOWN_MAX:-"200"}
RATELIMIT_FEEDS_WINDOW=${RATELIMIT_FEEDS_WINDOW:-"10 seconds"}
RATELIMIT_FEEDS_MAX=${RATELIMIT_FEEDS_MAX:-"500"}
RATELIMIT_ACTIVITYPUB_WINDOW=${RATELIMIT_ACTIVITYPUB_WINDOW:-"10 seconds"}
RATELIMIT_ACTIVITYPUB_MAX=${RATELIMIT_ACTIVITYPUB_MAX:-"500"}
RATELIMIT_CLIENT_WINDOW=${RATELIMIT_CLIENT_WINDOW:-"10 seconds"}
RATELIMIT_CLIENT_MAX=${RATELIMIT_CLIENT_MAX:-"500"}
RATELIMIT_DOWNLOAD_GENERATE_VIDEO_WINDOW=${RATELIMIT_DOWNLOAD_GENERATE_VIDEO_WINDOW:-"5 seconds"}
RATELIMIT_DOWNLOAD_GENERATE_VIDEO_MAX=${RATELIMIT_DOWNLOAD_GENERATE_VIDEO_MAX:-"5"}

REQUIRE_AUTH_PRIVATE_FILES=${REQUIRE_AUTH_PRIVATE_FILES:-"true"}
ENABLE_OBJECT_STORAGE=${ENABLE_OBJECT_STORAGE:-"false"}
OBJECT_STORAGE_MAX_UPLOAD_PART=${OBJECT_STORAGE_MAX_UPLOAD_PART:-"100 MB"}
OBJECT_STORAGE_MAX_REQUST_ATTEMPTS=${OBJECT_STORAGE_MAX_REQUST_ATTEMPTS:-"3"}
OBJECT_STORAGE_ENDPOINT=${OBJECT_STORAGE_ENDPOINT:-""}
OBJECT_STORAGE_REGION=${OBJECT_STORAGE_REGION:-"us-east-1"}
OBJECT_STORAGE_UPLOADACL_PRIVATE=${OBJECT_STORAGE_UPLOADACL_PRIVATE:-"private"}
OBJECT_STORAGE_UPLOADACL_PUBLIC=${OBJECT_STORAGE_UPLOADACL_PUBLIC:-"public-read"}
OBJECT_STORAGE_PROXY_PRIVATE_FILES=${OBJECT_STORAGE_PROXY_PRIVATE_FILES:-"true"}
OBJECT_STORAGE_CREDENTIALS_ACCESS_KEY_ID=${OBJECT_STORAGE_CREDENTIALS_ACCESS_KEY_ID:-""}
OBJECT_STORAGE_CREDENTIALS_SECRET_ACCESS_KEY=${OBJECT_STORAGE_CREDENTIALS_SECRET_ACCESS_KEY:-""}
OBJECT_STORAGE_ORIGINAL_VIDEO_BASE_URL=${OBJECT_STORAGE_ORIGINAL_VIDEO_BASE_URL:-""}
OBJECT_STORAGE_ORIGINAL_VIDEO_BUCKET_NAME=${OBJECT_STORAGE_ORIGINAL_VIDEO_BUCKET_NAME:-"original-video-files"}
OBJECT_STORAGE_ORIGINAL_VIDEO_PREFIX=${OBJECT_STORAGE_ORIGINAL_VIDEO_PREFIX:-""}
OBJECT_STORAGE_WEB_VIDEOS_BASE_URL=${OBJECT_STORAGE_WEB_VIDEOS_BASE_URL:-""}
OBJECT_STORAGE_WEB_VIDEOS_BUCKET_NAME=${OBJECT_STORAGE_WEB_VIDEOS_BUCKET_NAME:-"web-videos"}
OBJECT_STORAGE_WEB_VIDEOS_PREFIX=${OBJECT_STORAGE_WEB_VIDEOS_PREFIX:-""}
OBJECT_STORAGE_USER_EXPORTS_BASE_URL=${OBJECT_STORAGE_USER_EXPORTS_BASE_URL:-""}
OBJECT_STORAGE_USER_EXPORTS_BUCKET_NAME=${OBJECT_STORAGE_USER_EXPORTS_BUCKET_NAME:-"user-exports"}
OBJECT_STORAGE_USER_EXPORTS_PREFIX=${OBJECT_STORAGE_USER_EXPORTS_PREFIX:-""}
OBJECT_STORAGE_STREAMING_PLAYLISTS_BASE_URL=${OBJECT_STORAGE_STREAMING_PLAYLISTS_BASE_URL:-""}
OBJECT_STORAGE_STREAMING_PLAYLISTS_BUCKET_NAME=${OBJECT_STORAGE_STREAMING_PLAYLISTS_BUCKET_NAME:-"original-video-files"}
OBJECT_STORAGE_STREAMING_PLAYLISTS_PREFIX=${OBJECT_STORAGE_STREAMING_PLAYLISTS_PREFIX:-""}
OBJECT_STORAGE_STREAMING_PLAYLISTS_STORE_LIVE_STREAMS=${OBJECT_STORAGE_STREAMING_PLAYLISTS_STORE_LIVE_STREAMS:-"true"}

WEBSERVER_HTTPS=${WEBSERVER_HTTPS:-"false"}
WEBSERVER_HOSTNAME=${WEBSERVER_HOSTNAME:-"example.com"}
WEBSERVER_PORT=${WEBSERVER_PORT:-"443"}

OAUTH2_TOKEN_LIFETIME_ACCESS=${OAUTH2_TOKEN_LIFETIME_ACCESS:-"1 day"}
OAUTH2_TOKEN_LIFETIME_REFRESH=${OAUTH2_TOKEN_LIFETIME_REFRESH:-"2 weeks"}

OPENTELEMETRY_METRICS_ENABLED=${OPENTELEMETRY_METRICS_ENABLED:-"false"}
OPENTELEMETRY_METRICS_PLAYBACK_STATS_INTERVAL=${OPENTELEMETRY_METRICS_PLAYBACK_STATS_INTERVAL:-"15 seconds"}
OPENTELEMETRY_METRICS_HTTP_REQUEST_DURATION_ENABLED=${OPENTELEMETRY_METRICS_HTTP_REQUEST_DURATION_ENABLED:-"false"}
OPENTELEMETRY_METRICS_PROMETHEUS_EXPORTER_HOST=${OPENTELEMETRY_METRICS_PROMETHEUS_EXPORTER_HOST:-"127.0.0.1"}
OPENTELEMETRY_METRICS_PROMETHEUS_EXPORTER_PORT=${OPENTELEMETRY_METRICS_PROMETHEUS_EXPORTER_PORT:-"9091"}
OPENTELEMETRY_TRACING_ENABLED=${OPENTELEMETRY_TRACING_ENABLED:-"false"}
OPENTELEMETRY_TRACING_JAEGER_EXPORTER_ENDPOINT=${OPENTELEMETRY_TRACING_JAEGER_EXPORTER_ENDPOINT:-""}

#TRENDING_VIDEOS_INTERVAL_DAYS=${TRENDING_VIDEOS_INTERVAL_DAYS:-"7"}
#TRENDING_VIDEOS_ALGORITHMS_ENABLED=${TRENDING_VIDEOS_ALGORITHMS_ENABLED:-"hot,most-viewed,most-liked"}
#TRENDING_VIDEOS_ALGORITHMS_DEFAULT=${TRENDING_VIDEOS_ALGORITHMS_DEFAULT:-"most-viewed"}

#REDUNDANCY_VIDEOS_CHECK_INTERVAL=${REDUNDANCY_VIDEOS_CHECK_INTERVAL:-"1 hour"}
#REDUNDANCY_VIDEOS_STRATEGIES=${REDUNDANCY_VIDEOS_STRATEGIES:-""}
#REMOTE_REDUNDANCY_VIDEOS_ACCEPT_FROM=${REMOTE_REDUNDANCY_VIDEOS_ACCEPT_FROM:-"anybody"}

ENABLE_CSP=${ENABLE_CSP:-"false"}
CSP_REPORT_ONLY=${CSP_REPORT_ONLY:-"true"}
CSP_REPORT_URI=${CSP_REPORT_URI:-""}

SECURITY_ENABLE_FRAMEGUARD=${SECURITY_ENABLE_FRAMEGUARD:-"true"}
SECURITY_ENABLE_POWERED_BY_HEADER=${SECURITY_ENABLE_POWERED_BY_HEADER:-"false"}
ENABLE_FEDERATION=${ENABLE_FEDERATION:-"true"}
FEDERATION_PREVENT_SSRF=${FEDERATION_PREVENT_SSRF:-"true"}
FEDERATION_SIGN_FETCHES=${FEDERATION_SIGN_FETCHES:-"true"}
FEDERATION_VIDEOS_UNLISTED=${FEDERATION_VIDEOS_UNLISTED:-"false"}
FEDERATION_VIDEOS_CLEANUP_REMOTE_INTERACTIONS=${FEDERATION_VIDEOS_CLEANUP_REMOTE_INTERACTIONS:-"true"}
ENABLE_CHECK_LATEST_VERSION=${ENABLE_CHECK_LATEST_VERSION:-"false"}
CHECK_LATEST_VERSION_URL=${CHECK_LATEST_VERSION_URL:-"https://joinpeertube.org/api/v1/versions.json"}

STATS_ENABLE_REGISTRATION_REQUESTS=${STATS_ENABLE_REGISTRATION_REQUESTS:-"true"}
STATS_ENABLE_ABUSES=${STATS_ENABLE_ABUSES:-"true"}
STATS_ENABLE_TOTAL_MODERATORS=${STATS_ENABLE_TOTAL_MODERATORS:-"true"}
STATS_ENABLE_TOTAL_ADMINS=${STATS_ENABLE_TOTAL_ADMINS:-"true"}

TRUST_PROXY=${TRUST_PROXY:-"[\"127.0.0.1\", \"loopback\", \"172.16.0.0/12\"]"}